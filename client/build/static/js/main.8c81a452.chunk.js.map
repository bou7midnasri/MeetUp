{"version":3,"sources":["components/AppContext.js","components/LeftNav.js","components/Utils.js","actions/post.actions.js","components/Post/NewPostForm.js","actions/user.actions.js","components/Profil/FollowHandler.js","components/Post/LikeButton.js","components/Post/DeleteCard.js","components/Post/EditDeleteComment.js","components/Post/CardComments.js","components/Post/Card.js","components/Thread.js","components/Log/SignInForm.js","components/Log/SignUpForm.js","components/Log/index.js","components/Trends.js","components/Profil/FriendsHint.js","pages/Home.js","components/Profil/UploadImg.js","components/Profil/UpdateProfil.js","pages/Profil.js","pages/Trending.js","components/Log/Logout.js","components/Navbar.js","components/Routes/index.js","App.js","reducers/user.reducer.js","actions/users.actions.js","reducers/users.reducer.js","reducers/post.reducer.js","reducers/error.reducer.js","reducers/allPosts.reducer.js","reducers/trending.reducer.js","reducers/index.js","index.js"],"names":["UidContext","createContext","LeftNav","className","to","exact","activeClassName","src","alt","dateParser","num","timestamp","Date","parse","toLocaleDateString","hour","minute","second","weekday","year","month","day","toString","timestampParser","isEmpty","value","undefined","Object","keys","length","trim","GET_POSTS","GET_ALL_POSTS","LIKE_POST","UNLIKE_POST","UPDATE_POST","DELETE_POST","EDIT_COMMENT","DELETE_COMMENT","GET_TRENDS","GET_POST_ERRORS","getPosts","dispatch","axios","get","process","then","res","array","data","slice","type","payload","catch","err","console","log","addPost","post","errors","NewPostForm","useState","isLoading","setIsLoading","message","setMessage","postPicture","setPostPicture","video","setVideo","file","setFile","userData","useSelector","state","userReducer","error","errorReducer","postError","useDispatch","handlePost","a","FormData","append","_id","cancelPost","alert","useEffect","findLink","split","i","includes","embed","replace","splice","join","handleVideo","following","followers","picture","name","id","placeholder","onChange","e","target","pseudo","now","frameBorder","allow","allowFullScreen","title","accept","URL","createObjectURL","files","handlePicture","onClick","format","maxSize","GET_USER","UPLOAD_PICTURE","UPDATE_BIO","FOLLOW_USER","UNFOLLOW_USER","GET_USER_ERRORS","FollowHandler","idToFollow","isFollowed","setIsFollowed","followerId","idToUnfollow","method","url","followUser","LikeButton","liked","setLiked","uid","useContext","likers","trigger","position","closeOnDocumentClick","postId","userId","DeleteCard","props","deleteQuote","window","confirm","EditDeleteComment","comment","isAuthor","setIsAuthor","edit","setEdit","text","setText","handleDelete","commentId","deleteComment","commenterId","action","onSubmit","preventDefault","editComment","htmlFor","defaultValue","CardComments","usersData","usersReducer","comments","map","user","commenterPseudo","addComment","Card","isUpdated","setIsUpdated","textUpdate","setTextUpdate","showComments","setShowComments","posterId","createdAt","width","height","Thread","loadPost","setLoadPost","count","setCount","posts","postReducer","loadMore","innerHeight","document","documentElement","scrollTop","scrollingElement","scrollHeight","addEventListener","removeEventListener","SignInForm","email","setEmail","password","setPassword","emailError","querySelector","passwordError","withCredentials","innerHTML","location","SignUpForm","formSubmit","setFormSubmit","setPseudo","controlPassword","setControlPassword","handleRegister","terms","getElementById","pseudoError","passwordConfirmError","termsError","checked","href","rel","Log","signup","signUpModal","setSignUpModal","signin","signInModal","setSignInModal","handleModals","Trends","allPostsReducer","trendList","trendingReducer","sortedArray","sort","b","getTrends","FriendsHint","playOnce","setPlayOnce","friendsHint","setFriendsHint","push","Math","random","notFriendList","Home","UploadImg","uploadPicture","UpdateProfil","bio","setBio","updateForm","setUpdateForm","userError","followingPopup","setFollowingPopup","followersPopup","setFollowersPopup","updateBio","Profil","Trending","Logout","logout","key","cookie","remove","expires","Navbar","index","path","component","App","setUid","fetchToken","getUser","Provider","Routes","initialState","GET_USERS","combineReducers","filter","store","createStore","rootReducer","composeWithDevTools","applyMiddleware","thunk","ReactDOM","render"],"mappings":"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","file":"static/js/main.8c81a452.chunk.js","sourcesContent":["import { createContext } from 'react';\r\n\r\nexport const UidContext = createContext();","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nconst LeftNav = () => {\r\n  return (\r\n    <div className=\"left-nav-container\">\r\n      <div className=\"icons\">\r\n        <div className=\"icons-bis\">\r\n          <NavLink to='/' exact activeClassName=\"active-left-nav\">\r\n            <img src=\"./img/icons/home.svg\" alt=\"home\"/>\r\n          </NavLink>\r\n          <br/>\r\n          <NavLink to='/trending' exact activeClassName=\"active-left-nav\">\r\n            <img src=\"./img/icons/rocket.svg\" alt=\"home\"/>\r\n          </NavLink>\r\n          <br/>\r\n          <NavLink to='/profil' exact activeClassName=\"active-left-nav\">\r\n            <img src=\"./img/icons/user.svg\" alt=\"home\"/>\r\n          </NavLink>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LeftNav;","export const dateParser = (num) => {\r\n  let options = {\r\n    hour: \"2-digit\",\r\n    minute: \"2-digit\",\r\n    second: \"2-digit\",\r\n    weekday: \"long\",\r\n    year: \"numeric\",\r\n    month: \"short\",\r\n    day: \"numeric\",\r\n  };\r\n\r\n  let timestamp = Date.parse(num);\r\n\r\n  let date = new Date(timestamp).toLocaleDateString(\"fr-FR\", options);\r\n\r\n  return date.toString();\r\n};\r\n\r\nexport const timestampParser = (num) => {\r\n  let options = {\r\n    hour: \"2-digit\",\r\n    minute: \"2-digit\",\r\n    second: \"2-digit\",\r\n    weekday: \"long\",\r\n    year: \"numeric\",\r\n    month: \"short\",\r\n    day: \"numeric\",\r\n  };\r\n\r\n  let date = new Date(num).toLocaleDateString(\"fr-FR\", options);\r\n\r\n  return date.toString();\r\n}\r\n\r\nexport const isEmpty = (value) => {\r\n  return (\r\n    value === undefined ||\r\n    value === null ||\r\n    (typeof value === \"object\" && Object.keys(value).length === 0) ||\r\n    (typeof value === \"string\" && value.trim().length === 0)\r\n  );\r\n};\r\n","import axios from \"axios\";\r\n\r\n// posts\r\nexport const GET_POSTS = \"GET_POSTS\";\r\nexport const GET_ALL_POSTS = \"GET_ALL_POSTS\";\r\nexport const ADD_POST = \"ADD_POST\";\r\nexport const LIKE_POST = \"LIKE_POST\";\r\nexport const UNLIKE_POST = \"UNLIKE_POST\";\r\nexport const UPDATE_POST = \"UPDATE_POST\";\r\nexport const DELETE_POST = \"DELETE_POST\";\r\n\r\n// comments\r\nexport const ADD_COMMENT = \"ADD_COMMENT\";\r\nexport const EDIT_COMMENT = \"EDIT_COMMENT\";\r\nexport const DELETE_COMMENT = \"DELETE_COMMENT\";\r\n\r\n// trends\r\nexport const GET_TRENDS = \"GET_TRENDS\";\r\n\r\n// errors\r\nexport const GET_POST_ERRORS = \"GET_POST_ERRORS\";\r\n\r\nexport const getPosts = (num) => {\r\n  return (dispatch) => {\r\n    return axios\r\n      .get(`${process.env.REACT_APP_API_URL}api/post/`)\r\n      .then((res) => {\r\n        const array = res.data.slice(0, num);\r\n        dispatch({ type: GET_POSTS, payload: array });\r\n        dispatch({ type: GET_ALL_POSTS, payload: res.data });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n};\r\n\r\nexport const addPost = (data) => {\r\n  return (dispatch) => {\r\n    return axios\r\n      .post(`${process.env.REACT_APP_API_URL}api/post/`, data)\r\n      .then((res) => {\r\n        if (res.data.errors) {\r\n          dispatch({ type: GET_POST_ERRORS, payload: res.data.errors });\r\n        } else {\r\n          dispatch({ type: GET_POST_ERRORS, payload: \"\" });\r\n        }\r\n      });\r\n  };\r\n};\r\n\r\nexport const likePost = (postId, userId) => {\r\n  return (dispatch) => {\r\n    return axios({\r\n      method: \"patch\",\r\n      url: `${process.env.REACT_APP_API_URL}api/post/like-post/` + postId,\r\n      data: { id: userId },\r\n    })\r\n      .then((res) => {\r\n        dispatch({ type: LIKE_POST, payload: { postId, userId } });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n};\r\n\r\nexport const unlikePost = (postId, userId) => {\r\n  return (dispatch) => {\r\n    return axios({\r\n      method: \"patch\",\r\n      url: `${process.env.REACT_APP_API_URL}api/post/unlike-post/` + postId,\r\n      data: { id: userId },\r\n    })\r\n      .then((res) => {\r\n        dispatch({ type: UNLIKE_POST, payload: { postId, userId } });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n};\r\n\r\nexport const updatePost = (postId, message) => {\r\n  return (dispatch) => {\r\n    return axios({\r\n      method: \"put\",\r\n      url: `${process.env.REACT_APP_API_URL}api/post/${postId}`,\r\n      data: { message },\r\n    })\r\n      .then((res) => {\r\n        dispatch({ type: UPDATE_POST, payload: { message, postId } });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n};\r\n\r\nexport const deletePost = (postId) => {\r\n  return (dispatch) => {\r\n    return axios({\r\n      method: \"delete\",\r\n      url: `${process.env.REACT_APP_API_URL}api/post/${postId}`,\r\n    })\r\n      .then((res) => {\r\n        dispatch({ type: DELETE_POST, payload: { postId } });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n};\r\n\r\nexport const addComment = (postId, commenterId, text, commenterPseudo) => {\r\n  return (dispatch) => {\r\n    return axios({\r\n      method: \"patch\",\r\n      url: `${process.env.REACT_APP_API_URL}api/post/comment-post/${postId}`,\r\n      data: { commenterId, text, commenterPseudo },\r\n    })\r\n      .then((res) => {\r\n        dispatch({ type: ADD_COMMENT, payload: { postId } });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n};\r\n\r\nexport const editComment = (postId, commentId, text) => {\r\n  return (dispatch) => {\r\n    return axios({\r\n      method: \"patch\",\r\n      url: `${process.env.REACT_APP_API_URL}api/post/edit-comment-post/${postId}`,\r\n      data: { commentId, text },\r\n    })\r\n      .then((res) => {\r\n        dispatch({ type: EDIT_COMMENT, payload: { postId, commentId, text } });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n};\r\n\r\nexport const deleteComment = (postId, commentId) => {\r\n  return (dispatch) => {\r\n    return axios({\r\n      method: \"patch\",\r\n      url: `${process.env.REACT_APP_API_URL}api/post/delete-comment-post/${postId}`,\r\n      data: { commentId },\r\n    })\r\n      .then((res) => {\r\n        dispatch({ type: DELETE_COMMENT, payload: { postId, commentId } });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n};\r\n\r\nexport const getTrends = (sortedArray) => {\r\n  return (dispatch) => {\r\n    dispatch({ type: GET_TRENDS, payload: sortedArray });\r\n  };\r\n};\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { isEmpty, timestampParser } from \"../Utils\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { addPost, getPosts } from \"../../actions/post.actions\";\r\n\r\nconst NewPostForm = () => {\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [message, setMessage] = useState(\"\");\r\n  const [postPicture, setPostPicture] = useState(null);\r\n  const [video, setVideo] = useState(\"\");\r\n  const [file, setFile] = useState();\r\n  const userData = useSelector((state) => state.userReducer);\r\n  const error = useSelector((state) => state.errorReducer.postError);\r\n  const dispatch = useDispatch();\r\n  \r\n  const handlePost = async () => {\r\n    if (message || postPicture || video) {\r\n      const data = new FormData();\r\n      data.append('posterId', userData._id);\r\n      data.append('message', message);\r\n      if (file) data.append(\"file\", file);\r\n      data.append('video', video);\r\n\r\n      await dispatch(addPost(data));\r\n      dispatch(getPosts());\r\n      cancelPost();\r\n    } else {\r\n      alert(\"Veuillez entrer un message\")\r\n    }\r\n  };\r\n \r\n  const handlePicture = (e) => {\r\n    setPostPicture(URL.createObjectURL(e.target.files[0]));\r\n    setFile(e.target.files[0]);\r\n    setVideo('');\r\n  }; \r\n\r\n  const cancelPost = () => {\r\n    setMessage(\"\");\r\n    setPostPicture(\"\");\r\n    setVideo(\"\");\r\n    setFile(\"\");\r\n  };\r\n\r\n\r\n  useEffect(() => {\r\n    if (!isEmpty(userData)) setIsLoading(false);\r\n\r\n    const handleVideo = () => {\r\n      let findLink = message.split(\" \");\r\n      for (let i = 0; i < findLink.length; i++) {\r\n        if (\r\n          findLink[i].includes(\"https://www.yout\") ||\r\n          findLink[i].includes(\"https://yout\")\r\n        ) {\r\n          let embed = findLink[i].replace(\"watch?v=\", \"embed/\");\r\n          setVideo(embed.split(\"&\")[0]);\r\n          findLink.splice(i, 1);\r\n          setMessage(findLink.join(\" \"));\r\n          setPostPicture('');\r\n        }\r\n      }\r\n    };\r\n    handleVideo();\r\n  }, [userData, message, video]);\r\n\r\n  return (\r\n    <div className=\"post-container\">\r\n      {isLoading ? (\r\n        <i className=\"fas fa-spinner fa-pulse\"></i>\r\n      ) : (\r\n        <>\r\n          <div className=\"data\">\r\n            <p>\r\n              <span>{userData.following ? userData.following.length : 0}</span>{\" \"}\r\n              Abonnement\r\n              {userData.following && userData.following.length > 1 ? \"s\" : null}\r\n            </p>\r\n            <p>\r\n              <span>{userData.followers ? userData.followers.length : 0}</span>{\" \"}\r\n              Abonné\r\n              {userData.followers && userData.followers.length > 1 ? \"s\" : null}\r\n            </p>\r\n          </div>\r\n          <NavLink exact to=\"/profil\">\r\n            <div className=\"user-info\">\r\n              <img src={userData.picture} alt=\"user-img\" />\r\n            </div>\r\n          </NavLink>\r\n          <div className=\"post-form\">\r\n            <textarea\r\n              name=\"message\"\r\n              id=\"message\"\r\n              placeholder=\"Quoi de neuf ?\"\r\n              onChange={(e) => setMessage(e.target.value)}\r\n              value={message}\r\n            />\r\n            {message || postPicture || video.length > 20 ? (\r\n              <li className=\"card-container\">\r\n                <div className=\"card-left\">\r\n                  <img src={userData.picture} alt=\"user-pic\" />\r\n                </div>\r\n                <div className=\"card-right\">\r\n                  <div className=\"card-header\">\r\n                    <div className=\"pseudo\">\r\n                      <h3>{userData.pseudo}</h3>\r\n                    </div>\r\n                    <span>{timestampParser(Date.now())}</span>\r\n                  </div>\r\n                  <div className=\"content\">\r\n                    <p>{message}</p>\r\n                    <img src={postPicture} alt=\"\" />\r\n                    {video && (\r\n                      <iframe\r\n                        src={video}\r\n                        frameBorder=\"0\"\r\n                        allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\r\n                        allowFullScreen\r\n                        title={video}\r\n                      ></iframe>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </li>\r\n            ) : null}\r\n            <div className=\"footer-form\">\r\n              <div className=\"icon\">\r\n                {isEmpty(video) && (\r\n                  <>\r\n                    <img src=\"./img/icons/picture.svg\" alt=\"img\" />\r\n                    <input\r\n                      type=\"file\"\r\n                      id=\"file-upload\"\r\n                      name=\"file\"\r\n                      accept=\".jpg, .jpeg, .png\"\r\n                      onChange={(e) => handlePicture(e)}\r\n                    />\r\n                  </>\r\n                )}\r\n                {video && (\r\n                  <button onClick={() => setVideo(\"\")}>Supprimer video</button>\r\n                )}\r\n              </div>\r\n              {!isEmpty(error.format) && <p>{error.format}</p>}\r\n              {!isEmpty(error.maxSize) && <p>{error.maxSize}</p>}\r\n              <div className=\"btn-send\">\r\n                {message || postPicture || video.length > 20 ? (\r\n                  <button className=\"cancel\" onClick={cancelPost}>\r\n                    Annuler message\r\n                  </button>\r\n                ) : null}\r\n                <button className=\"send\" onClick={handlePost}>\r\n                  Envoyer\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NewPostForm;\r\n","import axios from \"axios\";\r\n\r\nexport const GET_USER = \"GET_USER\";\r\nexport const UPLOAD_PICTURE = \"UPLOAD_PICTURE\";\r\nexport const UPDATE_BIO = \"UPDATE_BIO\";\r\nexport const FOLLOW_USER = \"FOLLOW_USER\";\r\nexport const UNFOLLOW_USER = \"UNFOLLOW_USER\";\r\n\r\nexport const GET_USER_ERRORS = \"GET_USER_ERRORS\";\r\n\r\nexport const getUser = (uid) => {\r\n  return (dispatch) => {\r\n    return axios\r\n      .get(`${process.env.REACT_APP_API_URL}api/user/${uid}`)\r\n      .then((res) => {\r\n        dispatch({ type: GET_USER, payload: res.data });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n};\r\n\r\nexport const uploadPicture = (data, id) => {\r\n  return (dispatch) => {\r\n    return axios\r\n      .post(`${process.env.REACT_APP_API_URL}api/user/upload`, data)\r\n      .then((res) => {\r\n        if (res.data.errors) {\r\n          dispatch({ type: GET_USER_ERRORS, payload: res.data.errors });\r\n        } else {\r\n          dispatch({ type: GET_USER_ERRORS, payload: \"\" });\r\n          return axios\r\n            .get(`${process.env.REACT_APP_API_URL}api/user/${id}`)\r\n            .then((res) => {\r\n              dispatch({ type: UPLOAD_PICTURE, payload: res.data.picture });\r\n            });\r\n        }\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n};\r\n\r\nexport const updateBio = (userId, bio) => {\r\n  return (dispatch) => {\r\n    return axios({\r\n      method: \"put\",\r\n      url: `${process.env.REACT_APP_API_URL}api/user/` + userId,\r\n      data: { bio },\r\n    })\r\n      .then((res) => {\r\n        dispatch({ type: UPDATE_BIO, payload: bio });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n};\r\n\r\nexport const followUser = (followerId, idToFollow) => {\r\n  return (dispatch) => {\r\n    return axios({\r\n      method: \"patch\",\r\n      url: `${process.env.REACT_APP_API_URL}api/user/follow/` + followerId,\r\n      data: { idToFollow },\r\n    })\r\n      .then((res) => {\r\n        dispatch({ type: FOLLOW_USER, payload: { idToFollow } });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n};\r\n\r\nexport const unfollowUser = (followerId, idToUnfollow) => {\r\n  return (dispatch) => {\r\n    return axios({\r\n      method: \"patch\",\r\n      url: `${process.env.REACT_APP_API_URL}api/user/unfollow/` + followerId,\r\n      data: { idToUnfollow },\r\n    })\r\n      .then((res) => {\r\n        dispatch({ type: UNFOLLOW_USER, payload: { idToUnfollow } });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n};\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { followUser, unfollowUser } from \"../../actions/user.actions\";\r\nimport { isEmpty } from \"../Utils\";\r\n\r\nconst FollowHandler = ({ idToFollow, type }) => {\r\n  const userData = useSelector((state) => state.userReducer);\r\n  const [isFollowed, setIsFollowed] = useState(false);\r\n  const dispatch = useDispatch();\r\n\r\n  const handleFollow = () => {\r\n    dispatch(followUser(userData._id, idToFollow));\r\n    setIsFollowed(true);\r\n  };\r\n\r\n  const handleUnfollow = () => {\r\n    dispatch(unfollowUser(userData._id, idToFollow));\r\n    setIsFollowed(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!isEmpty(userData.following)) {\r\n      if (userData.following.includes(idToFollow)) {\r\n        setIsFollowed(true);\r\n      } else setIsFollowed(false);\r\n    }\r\n  }, [userData, idToFollow]);\r\n\r\n  return (\r\n    <>\r\n      {isFollowed && !isEmpty(userData) && (\r\n        <span onClick={handleUnfollow}>\r\n          {type === \"suggestion\" && <button className=\"unfollow-btn\">Abonné</button>}\r\n          {type === \"card\" && <img src=\"./img/icons/checked.svg\" alt=\"checked\"/>}\r\n        </span>\r\n      )}\r\n      {isFollowed === false && !isEmpty(userData) && (\r\n        <span onClick={handleFollow}>\r\n          {type === \"suggestion\" && <button className=\"follow-btn\">Suivre</button>}\r\n          {type === \"card\" && <img src=\"./img/icons/check.svg\" alt=\"check\"/>}\r\n        </span>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default FollowHandler;\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { UidContext } from \"../AppContext\";\r\nimport Popup from \"reactjs-popup\";\r\nimport \"reactjs-popup/dist/index.css\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { likePost, unlikePost } from \"../../actions/post.actions\";\r\n\r\nconst LikeButton = ({ post }) => {\r\n  const [liked, setLiked] = useState(false);\r\n  const uid = useContext(UidContext);\r\n  const dispatch = useDispatch();\r\n\r\n  const like = () => {\r\n    dispatch(likePost(post._id, uid))\r\n    setLiked(true);\r\n  };\r\n\r\n  const unlike = () => {\r\n    dispatch(unlikePost(post._id, uid))\r\n    setLiked(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (post.likers.includes(uid)) setLiked(true);\r\n    else setLiked(false);\r\n  }, [uid, post.likers, liked]);\r\n\r\n  return (\r\n    <div className=\"like-container\">\r\n      {uid === null && (\r\n        <Popup\r\n          trigger={<img src=\"./img/icons/heart.svg\" alt=\"like\" />}\r\n          position={[\"bottom center\", \"bottom right\", \"bottom left\"]}\r\n          closeOnDocumentClick\r\n        >\r\n          <div>Connectez-vous pour aimer un post !</div>\r\n        </Popup>\r\n      )}\r\n      {uid && liked === false && (\r\n        <img src=\"./img/icons/heart.svg\" onClick={like} alt=\"like\" />\r\n      )}\r\n      {uid && liked && (\r\n        <img src=\"./img/icons/heart-filled.svg\" onClick={unlike} alt=\"unlike\" />\r\n      )}\r\n      <span>{post.likers.length}</span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LikeButton;\r\n","import React from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { deletePost } from \"../../actions/post.actions\";\r\n\r\nconst DeleteCard = (props) => {\r\n  const dispatch = useDispatch();\r\n\r\n  const deleteQuote = () => dispatch(deletePost(props.id));\r\n\r\n  return (\r\n    <div\r\n      onClick={() => {\r\n        if (window.confirm(\"Voulez-vous supprimer cet article ?\")) {\r\n          deleteQuote();\r\n        }\r\n      }}\r\n    >\r\n      <img src=\"./img/icons/trash.svg\" alt=\"trash\" />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DeleteCard;\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { deleteComment, editComment } from \"../../actions/post.actions\";\r\nimport { UidContext } from \"../AppContext\";\r\n\r\nconst EditDeleteComment = ({ comment, postId }) => {\r\n  const [isAuthor, setIsAuthor] = useState(false);\r\n  const [edit, setEdit] = useState(false);\r\n  const [text, setText] = useState(\"\");\r\n  const uid = useContext(UidContext);\r\n  const dispatch = useDispatch();\r\n\r\n  const handleEdit = (e) => {\r\n    e.preventDefault();\r\n\r\n    if (text) {\r\n      dispatch(editComment(postId, comment._id, text));\r\n      setText(\"\");\r\n      setEdit(false);\r\n    }\r\n  };\r\n\r\n  const handleDelete = () => dispatch(deleteComment(postId, comment._id));\r\n\r\n  useEffect(() => {\r\n    const checkAuthor = () => {\r\n      if (uid === comment.commenterId) {\r\n        setIsAuthor(true);\r\n      }\r\n    };\r\n    checkAuthor();\r\n  }, [uid, comment.commenterId]);\r\n\r\n  return (\r\n    <div className=\"edit-comment\">\r\n      {isAuthor && edit === false && (\r\n        <span onClick={() => setEdit(!edit)}>\r\n          <img src=\"./img/icons/edit.svg\" alt=\"edit-comment\" />\r\n        </span>\r\n      )}\r\n      {isAuthor && edit && (\r\n        <form action=\"\" onSubmit={handleEdit} className=\"edit-comment-form\">\r\n          <label htmlFor=\"text\" onClick={() => setEdit(!edit)}>\r\n            Editer\r\n          </label>\r\n          <br />\r\n          <input\r\n            type=\"text\"\r\n            name=\"text\"\r\n            onChange={(e) => setText(e.target.value)}\r\n            defaultValue={comment.text}\r\n          />\r\n          <br />\r\n          <div className=\"btn\">\r\n            <span\r\n              onClick={() => {\r\n                if (window.confirm(\"Voulez-vous supprimer ce commentaire ?\")) {\r\n                  handleDelete();\r\n                }\r\n              }}\r\n            >\r\n              <img src=\"./img/icons/trash.svg\" alt=\"delete\" />\r\n            </span>\r\n            <input type=\"submit\" value=\"Valider modification\" />\r\n          </div>\r\n        </form>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EditDeleteComment;\r\n","import React, { useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { addComment, getPosts } from \"../../actions/post.actions\";\r\nimport FollowHandler from \"../Profil/FollowHandler\";\r\nimport { isEmpty, timestampParser } from \"../Utils\";\r\nimport EditDeleteComment from \"./EditDeleteComment\";\r\n\r\nconst CardComments = ({ post }) => {\r\n  const [text, setText] = useState(\"\");\r\n  const usersData = useSelector((state) => state.usersReducer);\r\n  const userData = useSelector((state) => state.userReducer);\r\n  const dispatch = useDispatch();\r\n\r\n  const handleComment = (e) => {\r\n    e.preventDefault();\r\n\r\n    if (text) {\r\n      dispatch(addComment(post._id, userData._id, text, userData.pseudo))\r\n        .then(() => dispatch(getPosts()))\r\n        .then(() => setText(''));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"comments-container\">\r\n      {post.comments.map((comment) => {\r\n        return (\r\n          <div\r\n            className={\r\n              comment.commenterId === userData._id\r\n                ? \"comment-container client\"\r\n                : \"comment-container\"\r\n            }\r\n            key={comment._id}\r\n          >\r\n            <div className=\"left-part\">\r\n              <img\r\n                src={\r\n                  !isEmpty(usersData[0]) &&\r\n                  usersData\r\n                    .map((user) => {\r\n                      if (user._id === comment.commenterId) return user.picture;\r\n                      else return null;\r\n                    })\r\n                    .join(\"\")\r\n                }\r\n                alt=\"commenter-pic\"\r\n              />\r\n            </div>\r\n            <div className=\"right-part\">\r\n              <div className=\"comment-header\">\r\n                <div className=\"pseudo\">\r\n                  <h3>{comment.commenterPseudo}</h3>\r\n                  {comment.commenterId !== userData._id && (\r\n                    <FollowHandler\r\n                      idToFollow={comment.commenterId}\r\n                      type={\"card\"}\r\n                    />\r\n                  )}\r\n                </div>\r\n                <span>{timestampParser(comment.timestamp)}</span>\r\n              </div>\r\n              <p>{comment.text}</p>\r\n              <EditDeleteComment comment={comment} postId={post._id} />\r\n            </div>\r\n          </div>\r\n        );\r\n      })}\r\n      {userData._id && (\r\n        <form action=\"\" onSubmit={handleComment} className=\"comment-form\">\r\n          <input\r\n            type=\"text\"\r\n            name=\"text\"\r\n            onChange={(e) => setText(e.target.value)}\r\n            value={text}\r\n            placeholder=\"Laisser un commentaire\"\r\n          />\r\n          <br />\r\n          <input type=\"submit\" value=\"Envoyer\" />\r\n        </form>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CardComments;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { dateParser, isEmpty } from \"../Utils\";\r\nimport FollowHandler from \"../Profil/FollowHandler\";\r\nimport LikeButton from \"./LikeButton\";\r\nimport { updatePost } from \"../../actions/post.actions\";\r\nimport DeleteCard from \"./DeleteCard\";\r\nimport CardComments from \"./CardComments\";\r\n\r\nconst Card = ({ post }) => {\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [isUpdated, setIsUpdated] = useState(false);\r\n  const [textUpdate, setTextUpdate] = useState(null);\r\n  const [showComments, setShowComments] = useState(false);\r\n  const usersData = useSelector((state) => state.usersReducer);\r\n  const userData = useSelector((state) => state.userReducer);\r\n  const dispatch = useDispatch();\r\n\r\n  const updateItem = () => {\r\n    if (textUpdate) {\r\n      dispatch(updatePost(post._id, textUpdate));\r\n    }\r\n    setIsUpdated(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    !isEmpty(usersData[0]) && setIsLoading(false);\r\n  }, [usersData]);\r\n\r\n  return (\r\n    <li className=\"card-container\" key={post._id}>\r\n      {isLoading ? (\r\n        <i className=\"fas fa-spinner fa-spin\"></i>\r\n      ) : (\r\n        <>\r\n          <div className=\"card-left\">\r\n            <img\r\n              src={\r\n                !isEmpty(usersData[0]) &&\r\n                usersData\r\n                  .map((user) => {\r\n                    if (user._id === post.posterId) return user.picture;\r\n                    else return null;\r\n                  })\r\n                  .join(\"\")\r\n              }\r\n              alt=\"poster-pic\"\r\n            />\r\n          </div>\r\n          <div className=\"card-right\">\r\n            <div className=\"card-header\">\r\n              <div className=\"pseudo\">\r\n                <h3>\r\n                  {!isEmpty(usersData[0]) &&\r\n                    usersData\r\n                      .map((user) => {\r\n                        if (user._id === post.posterId) return user.pseudo;\r\n                        else return null;\r\n                      })\r\n                      .join(\"\")}\r\n                </h3>\r\n                {post.posterId !== userData._id && (\r\n                  <FollowHandler idToFollow={post.posterId} type={\"card\"} />\r\n                )}\r\n              </div>\r\n              <span>{dateParser(post.createdAt)}</span>\r\n            </div>\r\n            {isUpdated === false && <p>{post.message}</p>}\r\n            {isUpdated && (\r\n              <div className=\"update-post\">\r\n                <textarea\r\n                  defaultValue={post.message}\r\n                  onChange={(e) => setTextUpdate(e.target.value)}\r\n                />\r\n                <div className=\"button-container\">\r\n                  <button className=\"btn\" onClick={updateItem}>\r\n                    Valider modification\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n            {post.picture && (\r\n              <img src={post.picture} alt=\"card-pic\" className=\"card-pic\" />\r\n            )}\r\n            {post.video && (\r\n              <iframe\r\n                width=\"500\"\r\n                height=\"300\"\r\n                src={post.video}\r\n                frameBorder=\"0\"\r\n                allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\r\n                allowFullScreen\r\n                title={post._id}\r\n              ></iframe>\r\n            )}\r\n            {userData._id === post.posterId && (\r\n              <div className=\"button-container\">\r\n                <div onClick={() => setIsUpdated(!isUpdated)}>\r\n                  <img src=\"./img/icons/edit.svg\" alt=\"edit\" />\r\n                </div>\r\n                <DeleteCard id={post._id} />\r\n              </div>\r\n            )}\r\n            <div className=\"card-footer\">\r\n              <div className=\"comment-icon\">\r\n                <img\r\n                  onClick={() => setShowComments(!showComments)}\r\n                  src=\"./img/icons/message1.svg\"\r\n                  alt=\"comment\"\r\n                />\r\n                <span>{post.comments.length}</span>\r\n              </div>\r\n              <LikeButton post={post} />\r\n              <img src=\"./img/icons/share.svg\" alt=\"share\" />\r\n            </div>\r\n            {showComments && <CardComments post={post} />}\r\n          </div>\r\n        </>\r\n      )}\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default Card;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { getPosts } from \"../actions/post.actions\";\r\nimport Card from \"./Post/Card\";\r\nimport { isEmpty } from \"./Utils\";\r\n\r\nconst Thread = () => {\r\n  const [loadPost, setLoadPost] = useState(true);\r\n  const [count, setCount] = useState(5);\r\n  const dispatch = useDispatch();\r\n  const posts = useSelector((state) => state.postReducer);\r\n\r\n  const loadMore = () => {\r\n    if (window.innerHeight + document.documentElement.scrollTop + 1 > document.scrollingElement.scrollHeight) {\r\n      setLoadPost(true);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (loadPost) {\r\n      dispatch(getPosts(count));\r\n      setLoadPost(false);\r\n      setCount(count + 5);\r\n    }\r\n\r\n    window.addEventListener('scroll', loadMore);\r\n    return () => window.removeEventListener('scroll', loadMore);\r\n  }, [loadPost, dispatch, count]);\r\n\r\n  return (\r\n    <div className=\"thread-container\">\r\n      <ul>\r\n        {!isEmpty(posts[0]) &&\r\n          posts.map((post) => {\r\n            return <Card post={post} key={post._id} />;\r\n          })}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Thread;\r\n","import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nconst SignInForm = () => {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  const handleLogin = (e) => {\r\n    e.preventDefault();\r\n    const emailError = document.querySelector(\".email.error\");\r\n    const passwordError = document.querySelector(\".password.error\");\r\n\r\n    axios({\r\n      method: \"post\",\r\n      url: `${process.env.REACT_APP_API_URL}api/user/login`,\r\n      withCredentials: true,\r\n      data: {\r\n        email,\r\n        password,\r\n      },\r\n    })\r\n      .then((res) => {\r\n        console.log(res);\r\n        if (res.data.errors) {\r\n          emailError.innerHTML = res.data.errors.email;\r\n          passwordError.innerHTML = res.data.errors.password;\r\n        } else {\r\n          window.location = \"/\";\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <form action=\"\" onSubmit={handleLogin} id=\"sign-up-form\">\r\n      <label htmlFor=\"email\">Email</label>\r\n      <br />\r\n      <input\r\n        type=\"text\"\r\n        name=\"email\"\r\n        id=\"email\"\r\n        onChange={(e) => setEmail(e.target.value)}\r\n        value={email}\r\n      />\r\n      <div className=\"email error\"></div>\r\n      <br />\r\n      <label htmlFor=\"password\">Mot de passe</label>\r\n      <br />\r\n      <input\r\n        type=\"password\"\r\n        name=\"password\"\r\n        id=\"password\"\r\n        onChange={(e) => setPassword(e.target.value)}\r\n        value={password}\r\n      />\r\n      <div className=\"password error\"></div>\r\n      <br />\r\n      <input type=\"submit\" value=\"Se connecter\" />\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default SignInForm;\r\n","import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport SignInForm from \"./SignInForm\";\r\n\r\nconst SignUpForm = () => {\r\n  const [formSubmit, setFormSubmit] = useState(false);\r\n  const [pseudo, setPseudo] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [controlPassword, setControlPassword] = useState(\"\");\r\n\r\n  const handleRegister = async (e) => {\r\n    e.preventDefault();\r\n    const terms = document.getElementById(\"terms\");\r\n    const pseudoError = document.querySelector(\".pseudo.error\");\r\n    const emailError = document.querySelector(\".email.error\");\r\n    const passwordError = document.querySelector(\".password.error\");\r\n    const passwordConfirmError = document.querySelector(\r\n      \".password-confirm.error\"\r\n    );\r\n    const termsError = document.querySelector(\".terms.error\");\r\n\r\n    passwordConfirmError.innerHTML = \"\";\r\n    termsError.innerHTML = \"\";\r\n\r\n    if (password !== controlPassword || !terms.checked) {\r\n      if (password !== controlPassword)\r\n        passwordConfirmError.innerHTML =\r\n          \"Les mots de passe ne correspondent pas\";\r\n\r\n      if (!terms.checked)\r\n        termsError.innerHTML = \"Veuillez valider les conditions générales\";\r\n    } else {\r\n      await axios({\r\n        method: \"post\",\r\n        url: `${process.env.REACT_APP_API_URL}api/user/register`,\r\n        data: {\r\n          pseudo,\r\n          email,\r\n          password,\r\n        },\r\n      })\r\n        .then((res) => {\r\n          console.log(res);\r\n          if (res.data.errors) {\r\n            pseudoError.innerHTML = res.data.errors.pseudo;\r\n            emailError.innerHTML = res.data.errors.email;\r\n            passwordError.innerHTML = res.data.errors.password;\r\n          } else {\r\n            setFormSubmit(true);\r\n          }\r\n        })\r\n        .catch((err) => console.log(err));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {formSubmit ? (\r\n        <>\r\n          <SignInForm />\r\n          <span></span>\r\n          <h4 className=\"success\">\r\n            Enregistrement réussi, veuillez-vous connecter\r\n          </h4>\r\n        </>\r\n      ) : (\r\n        <form action=\"\" onSubmit={handleRegister} id=\"sign-up-form\">\r\n          <label htmlFor=\"pseudo\">Pseudo</label>\r\n          <br />\r\n          <input\r\n            type=\"text\"\r\n            name=\"pseudo\"\r\n            id=\"pseudo\"\r\n            onChange={(e) => setPseudo(e.target.value)}\r\n            value={pseudo}\r\n          />\r\n          <div className=\"pseudo error\"></div>\r\n          <br />\r\n          <label htmlFor=\"email\">Email</label>\r\n          <br />\r\n          <input\r\n            type=\"text\"\r\n            name=\"email\"\r\n            id=\"email\"\r\n            onChange={(e) => setEmail(e.target.value)}\r\n            value={email}\r\n          />\r\n          <div className=\"email error\"></div>\r\n          <br />\r\n          <label htmlFor=\"password\">Mot de passe</label>\r\n          <br />\r\n          <input\r\n            type=\"password\"\r\n            name=\"password\"\r\n            id=\"password\"\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            value={password}\r\n          />\r\n          <div className=\"password error\"></div>\r\n          <br />\r\n          <label htmlFor=\"password-conf\">Confirmer mot de passe</label>\r\n          <br/>\r\n          <input\r\n            type=\"password\"\r\n            name=\"password\"\r\n            id=\"password-conf\"\r\n            onChange={(e) => setControlPassword(e.target.value)}\r\n            value={controlPassword}\r\n          />\r\n          <div className=\"password-confirm error\"></div>\r\n          <br />\r\n          <input type=\"checkbox\" id=\"terms\" />\r\n          <label htmlFor=\"terms\">\r\n            J'accepte les{\" \"}\r\n            <a href=\"/\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n              conditions générales\r\n            </a>\r\n          </label>\r\n          <div className=\"terms error\"></div>\r\n          <br />\r\n          <input type=\"submit\" value=\"Valider inscription\" />\r\n        </form>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default SignUpForm;\r\n","import React, { useState } from \"react\";\r\nimport SignInForm from \"./SignInForm\";\r\nimport SignUpForm from \"./SignUpForm\";\r\n\r\nconst Log = ( props ) => {\r\n  const [signUpModal, setSignUpModal] = useState(props.signup);\r\n  const [signInModal, setSignInModal] = useState(props.signin);\r\n\r\n  const handleModals = (e) => {\r\n    if (e.target.id === \"register\") {\r\n      setSignInModal(false);\r\n      setSignUpModal(true);\r\n    } else if (e.target.id === \"login\") {\r\n      setSignUpModal(false);\r\n      setSignInModal(true);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"connection-form\">\r\n      <div className=\"form-container\">\r\n        <ul>\r\n          <li\r\n            onClick={handleModals}\r\n            id=\"register\"\r\n            className={signUpModal ? \"active-btn\" : null}\r\n          >\r\n            S'inscrire\r\n          </li>\r\n          <li\r\n            onClick={handleModals}\r\n            id=\"login\"\r\n            className={signInModal ? \"active-btn\" : null}\r\n          >\r\n            Se connecter\r\n          </li>\r\n        </ul>\r\n        {signUpModal && <SignUpForm />}\r\n        {signInModal && <SignInForm />}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Log;\r\n","import React, { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { getTrends } from \"../actions/post.actions\";\r\nimport { isEmpty } from \"./Utils\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nconst Trends = () => {\r\n  const posts = useSelector((state) => state.allPostsReducer);\r\n  const usersData = useSelector((state) => state.usersReducer);\r\n  const trendList = useSelector((state) => state.trendingReducer);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (!isEmpty(posts[0])) {\r\n      const postsArr = Object.keys(posts).map((i) => posts[i]);\r\n      let sortedArray = postsArr.sort((a, b) => {\r\n        return b.likers.length - a.likers.length;\r\n      });\r\n      sortedArray.length = 3;\r\n      dispatch(getTrends(sortedArray));\r\n    }\r\n  }, [posts, dispatch]);\r\n\r\n  return (\r\n    <div className=\"trending-container\">\r\n      <h4>Trending</h4>\r\n      <NavLink exact to=\"/trending\">\r\n        <ul>\r\n          {trendList.length &&\r\n            trendList.map((post) => {\r\n              return (\r\n                <li key={post._id}>\r\n                  <div>\r\n                    {post.picture && <img src={post.picture} alt=\"post-pic\" />}\r\n                    {post.video && (\r\n                      <iframe\r\n                        src={post.video}\r\n                        frameBorder=\"0\"\r\n                        allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\r\n                        allowFullScreen\r\n                        title={post._id}\r\n                      ></iframe>\r\n                    )}\r\n                    {isEmpty(post.picture) && isEmpty(post.video) && (\r\n                      <img src={usersData[0] && usersData.map((user) => {\r\n                        if (user._id === post.posterId) {\r\n                          return user.picture;\r\n                        } else return null;\r\n                      })\r\n                      .join(\"\")\r\n                    } alt=\"profil-pic\"/>\r\n                    )}\r\n                  </div>\r\n                  <div className=\"trend-content\">\r\n                    <p>{post.message}</p>\r\n                    <span>Lire</span>\r\n                  </div>\r\n                </li>\r\n              );\r\n            })}\r\n        </ul>\r\n      </NavLink>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Trends;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { isEmpty } from \"../Utils\";\r\nimport FollowHandler from \"./FollowHandler\";\r\n\r\nconst FriendsHint = () => {\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [playOnce, setPlayOnce] = useState(true);\r\n  const [friendsHint, setFriendsHint] = useState([]);\r\n  const userData = useSelector((state) => state.userReducer);\r\n  const usersData = useSelector((state) => state.usersReducer);\r\n\r\n  useEffect(() => {\r\n    const notFriendList = () => {\r\n      let array = [];\r\n      usersData.map((user) => {\r\n        if (user._id !== userData._id && !user.followers.includes(userData._id))\r\n          return array.push(user._id);\r\n      });\r\n      array.sort(() => 0.5 - Math.random());\r\n      if (window.innerHeight > 780) {\r\n        array.length = 5;\r\n      } else if (window.innerHeight > 720) {\r\n        array.length = 4;\r\n      } else if (window.innerHeight > 615) {\r\n        array.length = 3;\r\n      } else if (window.innerHeight > 540) {\r\n        array.length = 1;\r\n      } else {\r\n        array.length = 0;\r\n      }\r\n      setFriendsHint(array);\r\n    };\r\n\r\n    if (playOnce && !isEmpty(usersData[0]) && !isEmpty(userData._id)) {\r\n      notFriendList();\r\n      setIsLoading(false);\r\n      setPlayOnce(false);\r\n    }\r\n  }, [usersData, userData, playOnce]);\r\n\r\n  return (\r\n    <div className=\"get-friends-container\">\r\n      <h4>Suggestions</h4>\r\n      {isLoading ? (\r\n        <div className=\"icon\">\r\n          <i className=\"fas fa-spinner fa-pulse\"></i>\r\n        </div>\r\n      ) : (\r\n        <ul>\r\n          {friendsHint &&\r\n            friendsHint.map((user) => {\r\n              for (let i = 0; i < usersData.length; i++) {\r\n                if (user === usersData[i]._id) {\r\n                  return (\r\n                    <li className=\"user-hint\" key={user}>\r\n                      <img src={usersData[i].picture} alt=\"user-pic\" />\r\n                      <p>{usersData[i].pseudo}</p>\r\n                      <FollowHandler\r\n                        idToFollow={usersData[i]._id}\r\n                        type={\"suggestion\"}\r\n                      />\r\n                    </li>\r\n                  );\r\n                }\r\n                else return null\r\n              }\r\n            })}\r\n        </ul>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FriendsHint;\r\n","import React, { useContext } from \"react\";\r\nimport { UidContext } from \"../components/AppContext\";\r\nimport LeftNav from \"../components/LeftNav\";\r\nimport NewPostForm from \"../components/Post/NewPostForm\";\r\nimport Thread from \"../components/Thread\";\r\nimport Log from \"../components/Log\";\r\nimport Trends from \"../components/Trends\";\r\nimport FriendsHint from \"../components/Profil/FriendsHint\";\r\n\r\nconst Home = () => {\r\n  const uid = useContext(UidContext);\r\n\r\n  return (\r\n    <div className=\"home\">\r\n      <LeftNav />\r\n      <div className=\"main\">\r\n        <div className=\"home-header\">\r\n        {uid ? <NewPostForm /> : <Log signin={true} signup={false} />}\r\n        </div>\r\n        <Thread />\r\n      </div>\r\n      <div className=\"right-side\">\r\n        <div className=\"right-side-container\">\r\n          <div className=\"wrapper\">\r\n            <Trends />\r\n            {uid && <FriendsHint />}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n","import React, { useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { uploadPicture } from \"../../actions/user.actions\";\r\n\r\nconst UploadImg = () => {\r\n  const [file, setFile] = useState();\r\n  const dispatch = useDispatch();\r\n  const userData = useSelector((state) => state.userReducer);\r\n\r\n  const handlePicture = (e) => {\r\n    e.preventDefault();\r\n    const data = new FormData();\r\n    data.append(\"name\", userData.pseudo);\r\n    data.append(\"userId\", userData._id);\r\n    data.append(\"file\", file);\r\n\r\n    dispatch(uploadPicture(data, userData._id));\r\n  };\r\n\r\n  return (\r\n    <form action=\"\" onSubmit={handlePicture} className=\"upload-pic\">\r\n      <label htmlFor=\"file\">Changer d'image</label>\r\n      <input\r\n        type=\"file\"\r\n        id=\"file\"\r\n        name=\"file\"\r\n        accept=\".jpg, .jpeg, .png\"\r\n        onChange={(e) => setFile(e.target.files[0])}\r\n      />\r\n      <br/>\r\n      <input type=\"submit\" value=\"Envoyer\" />\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default UploadImg;\r\n","import React, { useState } from \"react\";\r\nimport LeftNav from \"../LeftNav\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport UploadImg from \"./UploadImg\";\r\nimport { updateBio } from \"../../actions/user.actions\";\r\nimport { dateParser } from \"../Utils\";\r\nimport FollowHandler from \"./FollowHandler\";\r\n\r\nconst UpdateProfil = () => {\r\n  const [bio, setBio] = useState(\"\");\r\n  const [updateForm, setUpdateForm] = useState(false);\r\n  const userData = useSelector((state) => state.userReducer);\r\n  const usersData = useSelector((state) => state.usersReducer);\r\n  const error = useSelector((state) => state.errorReducer.userError);\r\n  const dispatch = useDispatch();\r\n  const [followingPopup, setFollowingPopup] = useState(false);\r\n  const [followersPopup, setFollowersPopup] = useState(false);\r\n\r\n  const handleUpdate = () => {\r\n    dispatch(updateBio(userData._id, bio));\r\n    setUpdateForm(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"profil-container\">\r\n      <LeftNav />\r\n      <h1> Profil de {userData.pseudo}</h1>\r\n      <div className=\"update-container\">\r\n        <div className=\"left-part\">\r\n          <h3>Photo de profil</h3>\r\n          <img src={userData.picture} alt=\"user-pic\" />\r\n          <UploadImg />\r\n          <p>{error.maxSize}</p>\r\n          <p>{error.format}</p>\r\n        </div>\r\n        <div className=\"right-part\">\r\n          <div className=\"bio-update\">\r\n            <h3>Bio</h3>\r\n            {updateForm === false && (\r\n              <>\r\n                <p onClick={() => setUpdateForm(!updateForm)}>{userData.bio}</p>\r\n                <button onClick={() => setUpdateForm(!updateForm)}>\r\n                  Modifier bio\r\n                </button>\r\n              </>\r\n            )}\r\n            {updateForm && (\r\n              <>\r\n                <textarea\r\n                  type=\"text\"\r\n                  defaultValue={userData.bio}\r\n                  onChange={(e) => setBio(e.target.value)}\r\n                ></textarea>\r\n                <button onClick={handleUpdate}>Valider modifications</button>\r\n              </>\r\n            )}\r\n          </div>\r\n          <h4>Membre depuis le : {dateParser(userData.createdAt)}</h4>\r\n          <h5 onClick={() => setFollowingPopup(true)}>\r\n            Abonnements : {userData.following ? userData.following.length : \"\"}\r\n          </h5>\r\n          <h5 onClick={() => setFollowersPopup(true)}>\r\n            Abonnés : {userData.followers ? userData.followers.length : \"\"}\r\n          </h5>\r\n        </div>\r\n      </div>\r\n      {followingPopup && (\r\n        <div className=\"popup-profil-container\">\r\n          <div className=\"modal\">\r\n            <h3>Abonnements</h3>\r\n            <span className=\"cross\" onClick={() => setFollowingPopup(false)}>\r\n              &#10005;\r\n            </span>\r\n            <ul>\r\n              {usersData.map((user) => {\r\n                for (let i = 0; i < userData.following.length; i++) {\r\n                  if (user._id === userData.following[i]) {\r\n                    return (\r\n                      <li key={user._id}>\r\n                        <img src={user.picture} alt=\"user-pic\" />\r\n                        <h4>{user.pseudo}</h4>\r\n                        <div className=\"follow-handler\">\r\n                          <FollowHandler idToFollow={user._id} type={'suggestion'} />\r\n                        </div>\r\n                      </li>\r\n                    );\r\n                  } \r\n                }\r\n                return null;\r\n              })}\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      )}\r\n      {followersPopup && (\r\n        <div className=\"popup-profil-container\">\r\n          <div className=\"modal\">\r\n            <h3>Abonnés</h3>\r\n            <span className=\"cross\" onClick={() => setFollowersPopup(false)}>\r\n              &#10005;\r\n            </span>\r\n            <ul>\r\n              {usersData.map((user) => {\r\n                for (let i = 0; i < userData.followers.length; i++) {\r\n                  if (user._id === userData.followers[i]) {\r\n                    return (\r\n                      <li key={user._id}>\r\n                        <img src={user.picture} alt=\"user-pic\" />\r\n                        <h4>{user.pseudo}</h4>\r\n                        <div className=\"follow-handler\">\r\n                          <FollowHandler idToFollow={user._id} type={'suggestion'} />\r\n                        </div>\r\n                      </li>\r\n                    );\r\n                  }\r\n                }\r\n                return null;\r\n              })}\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UpdateProfil;\r\n","import React, { useContext } from \"react\";\r\nimport Log from \"../components/Log\";\r\nimport { UidContext } from \"../components/AppContext\";\r\nimport UpdateProfil from \"../components/Profil/UpdateProfil\";\r\n\r\nconst Profil = () => {\r\n  const uid = useContext(UidContext);\r\n\r\n  return (\r\n    <div className=\"profil-page\">\r\n      {uid ? (\r\n        <UpdateProfil />\r\n      ) : (\r\n        <div className=\"log-container\">\r\n          <Log signin={false} signup={true} />\r\n          <div className=\"img-container\">\r\n            <img src=\"./img/log.jpg\" alt=\"img-log\" />\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Profil;\r\n","import React, { useContext } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { UidContext } from \"../components/AppContext\";\r\nimport LeftNav from '../components/LeftNav';\r\nimport { isEmpty } from \"../components/Utils\";\r\nimport Card from \"../components/Post/Card\";\r\nimport Trends from \"../components/Trends\";\r\nimport FriendsHint from \"../components/Profil/FriendsHint\";\r\n\r\nconst Trending = () => {\r\n  const uid = useContext(UidContext);\r\n  const trendList = useSelector((state) => state.trendingReducer);\r\n\r\n  return <div className=\"trending-page\">\r\n    <LeftNav />\r\n    <div className=\"main\">\r\n      <ul>\r\n        {!isEmpty(trendList[0]) && trendList.map((post) => <Card post={post} key={post._id} />)}\r\n      </ul>\r\n    </div>\r\n    <div className=\"right-side\">\r\n      <div className=\"right-side-container\">\r\n        <Trends />\r\n        {uid && <FriendsHint />}\r\n      </div>\r\n    </div>\r\n  </div>;\r\n};\r\n\r\nexport default Trending;\r\n","import React from \"react\";\r\nimport axios from \"axios\";\r\nimport cookie from \"js-cookie\";\r\n\r\nconst Logout = () => {\r\n  const removeCookie = (key) => {\r\n    if (window !== \"undefined\") {\r\n      cookie.remove(key, { expires: 1 });\r\n    }\r\n  };\r\n\r\n  const logout = async () => {\r\n    await axios({\r\n      method: \"get\",\r\n      url: `${process.env.REACT_APP_API_URL}api/user/logout`,\r\n      withCredentials: true,\r\n    })\r\n      .then(() => removeCookie(\"jwt\"))\r\n      .catch((err) => console.log(err));\r\n    \r\n    window.location = \"/\";\r\n  };\r\n\r\n  return (\r\n    <li onClick={logout}>\r\n      <img src=\"./img/icons/logout.svg\" alt=\"logout\" />\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default Logout;\r\n","import React, { useContext } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { UidContext } from \"./AppContext\";\r\nimport Logout from \"./Log/Logout\";\r\n\r\nconst Navbar = () => {\r\n  const uid = useContext(UidContext);\r\n  const userData = useSelector((state) => state.userReducer);\r\n\r\n  return (\r\n    <nav>\r\n      <div className=\"nav-container\">\r\n        <div className=\"logo\">\r\n          <NavLink exact to=\"/\">\r\n            <div className=\"logo\">\r\n          \r\n              <h1>MeetUP</h1>\r\n            </div>\r\n          </NavLink>\r\n        </div>\r\n        {uid ? (\r\n          <ul>\r\n            <li></li>\r\n            <li className=\"welcome\">\r\n              <NavLink exact to=\"/profil\">\r\n                <h5>Bienvenue {userData.pseudo}</h5>\r\n              </NavLink>\r\n            </li>\r\n            <Logout />\r\n          </ul>\r\n        ) : (\r\n          <ul>\r\n            <li></li>\r\n            <li>\r\n              <NavLink exact to=\"/profil\">\r\n                <img src=\"./img/icons/login.svg\" alt=\"login\"/>\r\n              </NavLink>\r\n            </li>\r\n          </ul>\r\n        )}\r\n      </div>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default Navbar;\r\n","import React from 'react';\r\nimport { BrowserRouter as Router, Redirect, Route, Switch } from 'react-router-dom';\r\nimport Home from '../../pages/Home';\r\nimport Profil from '../../pages/Profil';\r\nimport Trending from '../../pages/Trending';\r\nimport Navbar from '../Navbar';\r\n\r\nconst index = () => {\r\n  return (\r\n    <Router>\r\n      <Navbar />\r\n      <Switch>\r\n        <Route path=\"/\" exact component={Home} />\r\n        <Route path=\"/profil\" exact component={Profil} />\r\n        <Route path=\"/trending\" exact component={Trending} />\r\n        <Redirect to=\"/\" />\r\n      </Switch>\r\n    </Router>\r\n  );\r\n};\r\n\r\nexport default index;","import React, { useEffect, useState } from \"react\";\r\nimport Routes from \"./components/Routes\";\r\nimport { UidContext } from \"./components/AppContext\";\r\nimport axios from \"axios\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { getUser } from \"./actions/user.actions\";\r\n\r\nconst App = () => {\r\n  const [uid, setUid] = useState(null);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    const fetchToken = async () => {\r\n      await axios({\r\n        method: \"get\",\r\n        url: `${process.env.REACT_APP_API_URL}jwtid`,\r\n        withCredentials: true,\r\n      })\r\n        .then((res) => {\r\n          setUid(res.data);\r\n        })\r\n        .catch((err) => console.log(\"No token\"));\r\n    };\r\n    fetchToken();\r\n\r\n    if (uid) dispatch(getUser(uid));\r\n  }, [uid, dispatch]);\r\n\r\n  return (\r\n    <UidContext.Provider value={uid}>\r\n      <Routes />\r\n    </UidContext.Provider>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import {\r\n  FOLLOW_USER,\r\n  GET_USER,\r\n  UNFOLLOW_USER,\r\n  UPDATE_BIO,\r\n  UPLOAD_PICTURE,\r\n} from \"../actions/user.actions\";\r\n\r\nconst initialState = {};\r\n\r\nexport default function userReducer(state = initialState, action) {\r\n  switch (action.type) {\r\n    case GET_USER:\r\n      return action.payload;\r\n    case UPLOAD_PICTURE:\r\n      return {\r\n        ...state,\r\n        picture: action.payload,\r\n      };\r\n    case UPDATE_BIO:\r\n      return {\r\n        ...state,\r\n        bio: action.payload,\r\n      };\r\n    case FOLLOW_USER:\r\n      return {\r\n        ...state,\r\n        following: [action.payload.idToFollow, ...state.following],\r\n      };\r\n    case UNFOLLOW_USER:\r\n      return {\r\n        ...state,\r\n        following: state.following.filter(\r\n          (id) => id !== action.payload.idToUnfollow\r\n        ),\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import axios from \"axios\";\r\n\r\nexport const GET_USERS = \"GET_USERS\";\r\n\r\nexport const getUsers = () => {\r\n  return (dispatch) => {\r\n    return axios\r\n      .get(`${process.env.REACT_APP_API_URL}api/user`)\r\n      .then((res) => {\r\n        dispatch({ type: GET_USERS, payload: res.data });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n};\r\n","import { GET_USERS } from \"../actions/users.actions\";\r\n\r\nconst initialState = {};\r\n\r\nexport default function usersReducer(state = initialState, action) {\r\n  switch (action.type) {\r\n    case GET_USERS:\r\n      return action.payload;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import {\r\n  DELETE_COMMENT,\r\n  DELETE_POST,\r\n  EDIT_COMMENT,\r\n  GET_POSTS,\r\n  LIKE_POST,\r\n  UNLIKE_POST,\r\n  UPDATE_POST,\r\n} from \"../actions/post.actions\";\r\n\r\nconst initialState = {};\r\n\r\nexport default function postReducer(state = initialState, action) {\r\n  switch (action.type) {\r\n    case GET_POSTS:\r\n      return action.payload;\r\n    case LIKE_POST:\r\n      return state.map((post) => {\r\n        if (post._id === action.payload.postId) {\r\n          return {\r\n            ...post,\r\n            likers: [action.payload.userId, ...post.likers],\r\n          };\r\n        }\r\n        return post;\r\n      });\r\n    case UNLIKE_POST:\r\n      return state.map((post) => {\r\n        if (post._id === action.payload.postId) {\r\n          return {\r\n            ...post,\r\n            likers: post.likers.filter((id) => id !== action.payload.userId),\r\n          };\r\n        }\r\n        return post;\r\n      });\r\n    case UPDATE_POST:\r\n      return state.map((post) => {\r\n        if (post._id === action.payload.postId) {\r\n          return {\r\n            ...post,\r\n            message: action.payload.message,\r\n          };\r\n        } else return post;\r\n      });\r\n    case DELETE_POST:\r\n      return state.filter((post) => post._id !== action.payload.postId);\r\n    case EDIT_COMMENT:\r\n      return state.map((post) => {\r\n        if (post._id === action.payload.postId) {\r\n          return {\r\n            ...post,\r\n            comments: post.comments.map((comment) => {\r\n              if (comment._id === action.payload.commentId) {\r\n                return {\r\n                  ...comment,\r\n                  text: action.payload.text,\r\n                };\r\n              } else {\r\n                return comment;\r\n              }\r\n            }),\r\n          };\r\n        } else return post;\r\n      });\r\n    case DELETE_COMMENT:\r\n      return state.map((post) => {\r\n        if (post._id === action.payload.postId) {\r\n          return {\r\n            ...post,\r\n            comments: post.comments.filter(\r\n              (comment) => comment._id !== action.payload.commentId\r\n            ),\r\n          };\r\n        } else return post;\r\n      });\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { GET_POST_ERRORS } from \"../actions/post.actions\";\r\nimport { GET_USER_ERRORS } from \"../actions/user.actions\";\r\n\r\nconst initialState = { userError: [], postError: []};\r\n\r\nexport default function errorReducer(state = initialState, action) {\r\n  switch (action.type) {\r\n    case GET_POST_ERRORS:\r\n      return {\r\n        postError: action.payload,\r\n        userError: []\r\n      }\r\n    case GET_USER_ERRORS:\r\n      return {\r\n        userError: action.payload,\r\n        postError: []\r\n      }\r\n    default: \r\n      return state;\r\n  }\r\n}","import { GET_ALL_POSTS } from \"../actions/post.actions\";\r\n\r\nconst initialState = {};\r\n\r\nexport default function allPostsReducer(state = initialState, action) {\r\n  switch (action.type) {\r\n    case GET_ALL_POSTS:\r\n      return action.payload\r\n    default: \r\n      return state;\r\n  }\r\n}","import { GET_TRENDS } from \"../actions/post.actions\";\r\n\r\nconst initialState = {};\r\n\r\nexport default function trendingReducer(state = initialState, action) {\r\n  switch (action.type) {\r\n    case GET_TRENDS:\r\n      return action.payload;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { combineReducers } from 'redux';\r\nimport userReducer from './user.reducer';\r\nimport usersReducer from './users.reducer';\r\nimport postReducer from './post.reducer';\r\nimport errorReducer from './error.reducer';\r\nimport allPostsReducer from './allPosts.reducer';\r\nimport trendingReducer from './trending.reducer';\r\n\r\nexport default combineReducers({\r\n  userReducer,\r\n  usersReducer,\r\n  postReducer,\r\n  errorReducer,\r\n  allPostsReducer,\r\n  trendingReducer\r\n});","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\nimport \"./styles/index.scss\";\r\nimport { Provider } from \"react-redux\";\r\nimport { applyMiddleware, createStore } from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\nimport rootReducer from \"./reducers\";\r\nimport { getUsers } from \"./actions/users.actions\";\r\n// dev tools\r\nimport { composeWithDevTools } from \"redux-devtools-extension\";\r\nimport { getPosts } from \"./actions/post.actions\";\r\n\r\nconst store = createStore(\r\n  rootReducer,\r\n  composeWithDevTools(applyMiddleware(thunk))\r\n);\r\n\r\nstore.dispatch(getUsers());\r\nstore.dispatch(getPosts());\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}